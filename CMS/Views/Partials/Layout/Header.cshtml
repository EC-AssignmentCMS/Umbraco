@using Umbraco.Cms.Web.Common.PublishedModels
@using Umbraco.Cms.Core.Models.Blocks
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage

@{
    var siteSettings = Umbraco.ContentAtRoot()
        .DescendantsOrSelf<SiteSettings>()
        .FirstOrDefault();

    var social = siteSettings?.SocialMediaPlatformList ?? Enumerable.Empty<BlockListItem>();
    var address = siteSettings?.Address ?? "No address found.";
    var logoImg = siteSettings?.LogoImage;
    var socials = new BlockListModel(siteSettings?.Value<IList<BlockListItem>>("socialMediaPlatformList") ?? new List<BlockListItem>());
}

<header>
    <nav class="top-nav">
        <a class="address-link" href="https://www.google.com/maps/search/@address" target="_blank">@address</a>

        <div class="social-media-container">
            @foreach (var item in socials)
            {
                var content = item.Content;
                var platform = content.Value<string>("platformName")?.ToLowerInvariant()?.Trim();
                var url = content.Value<string>("platformAccountUrl");

                if (!string.IsNullOrWhiteSpace(url) && !string.IsNullOrWhiteSpace(platform))
                {
                    <a href="@url"
                       target="_blank"
                       rel="noopener"
                       class="social @platform"
                       aria-label="@platform"></a>
                }
            }
        </div>
    </nav>
    <div class="bottom-header">
        <div class="logo-container">
            @if (logoImg != null)
            {
                <img src="@logoImg.Url()" alt="@logoImg.Name" />
            }
        </div>

        <nav class="main-navigation">
            <a href="/">Home</a>
            <a href="/about">About</a>
            <a href="/services">Services</a>
            <a href="/projects">Projects</a>
            <a href="/contact">Contact</a>
        </nav>

        <div class="search-container">
            <i class="fa-solid fa-magnifying-glass"></i>
        </div>
    </div>
</header>